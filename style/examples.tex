% ---------------------------------------------------------------------
% ---------------------------------------------------------------------

\newcommand{\FuenteEjemplos}{\small}

% ---------------------------------------------------------------------
% ---------------------------------------------------------------------
% Theorem and examples

\usepackage[most]{tcolorbox}


% ---------------------------------------------------------------------
% Ejemplo: custom environment for examples
\usepackage[nameinlink,capitalize]{cleveref}

\definecolor{colorFonsExemples}{rgb}{0.95,0.95,0.95}
\colorlet{colorFonsCapcaleraExemples}{black!18!white}

\newtcbtheorem[
	auto counter,
	number within = chapter,
	]{texemple}{\bfseries Example}{
		enhanced jigsaw,
		breakable,
		pad at break* = 1mm,
		arc = 0.0mm,
		%
		sharpish corners,
		leftrule = 0pt, rightrule = 0pt,
		bottomrule = 0pt, toprule = 0pt,
		%
		colback = colorFonsExemples,
		colframe = colorFonsExemples,
		description color = black,
		coltitle = black,
		colbacktitle = colorFonsCapcaleraExemples,
		fonttitle = \FuenteEjemplos,
		fontupper = \FuenteEjemplos,
		toptitle = 0.45ex, bottomtitle = 0.25ex,
		before skip = 4ex, after skip = 4ex,
		}{ejemplo}

\newcounter{ejemploCounter}[chapter]
\renewcommand{\theejemploCounter}{\thechapter.\arabic{ejemploCounter}}
\newenvironment{Ejemplo}[2]
	{
	\refstepcounter{ejemploCounter}
	\begin{texemple}{#1}{#2}
	\parskip = \separaParrafos 
	\parindent = \indentaParrafos 
	\abovedisplayshortskip = -1.0ex plus 0ex minus 0.25ex
	\belowdisplayshortskip = 2.0ex plus 1ex minus 0.0ex	
	\abovedisplayskip = -1.0ex plus 0ex minus 0.25ex
	\belowdisplayskip = 2.0ex plus 1ex minus 0.0ex
	}
	{
	\end{texemple}
	}
\Crefname{ejemploCounter}{Example}{Examples}


\newenvironment{enunciadoEjercicio}{\itshape}{} %\slshape

\newcommand{\finEjemplo}[1]{%
	\vspace{1ex}
	\begin{flushright}
		\slshape\FuenteEjemplos
		{Fin del ejemplo} \ref{ejemplo:#1}
		\hspace{1em}\textcolor{colorFonsCapcaleraExemples}{$\blacksquare$}
	\end{flushright}
	%
	\vspace{-1ex}
	}

		
% ---------------------------------------------------------------------
% Gray zone

\makeatletter
\newenvironment{zonaGrisa}{\begin{tcolorbox}[
		width = \textwidth-\@totalleftmargin,
		enhanced jigsaw,
		sharpish corners,
		breakable,
		boxrule=0pt,
		leftrule = 0pt, rightrule = 0pt,
		left=1em,right=1em,top=3ex,bottom=1ex, 
		bottomrule=0pt,toprule=0pt,
		colback=colorFonsSolucions,
		colframe=colorMarcSolucions,
		coltitle = black,
		fonttitle=\bfseries\upshape,
		fontupper = \SelectFont\selectfont,
		before skip = 0ex, after skip = 4ex,
		]\parskip = 2ex}{\end{tcolorbox}}
\makeatother		